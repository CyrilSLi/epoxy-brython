<!DOCTYPE html>
<html lang="en">
<head>
    <title>epoxy-polyfill test</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11/build/styles/default.min.css">
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11/build/highlight.min.js"></script>
    <script src="javascript.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/brython@3/brython.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/brython@3/brython_stdlib.min.js"></script>
    <script src="brython.js"></script>
    <style>
        button {
            margin-right: 20px;
        }
        button, div.grid, h2 {
            display: inline-block;
        }
    </style>
</head>
<body onload="brython(0)">
    <noscript>
        <p>JavaScript is required to use this website.</p>
    </noscript>
    <div style="margin: 20px;">
        <h1>epoxy-polyfill test</h1>
        <p>This page tests</p>
        <div class="grid">
            <button id="xhr">Send</button>
            <h2>JavaScript <code>XMLHttpRequest</code></h2>
        </div>
        <pre><code class="language-javascript">const req = new XMLHttpRequest();
req.open("GET", "https://example.com", true);
req.onreadystatechange = function() {
    if (req.readyState === 4 && req.status === 200) {
        console.log(req.responseText);
    }
};
req.send();</code></pre>
        <div class="grid">
            <button id="fetch">Send</button>
            <h2>JavaScript <code>fetch()</code></h2>
        </div>
        <pre><code class="language-javascript">fetch("https://example.com").then((res) => res.text().then((text) => console.log(text)));</code></pre>
        <div class="grid">
            <button id="fetch">Send</button>
            <h2>Brython <code>ajax.get()</code></h2>
        </div>
        <pre><code class="language-python">from browser import ajax, window
ajax.get("https://www.example.com", oncomplete=lambda res: window.console.log(res.text))</code></pre>
        <div class="grid">
            <button id="fetch">Send</button>
            <h2>Brython <code>ajax.Ajax()</code></h2>
        </div>
        <pre><code class="language-python">1+1</code></pre>
    </div>
    <script>
        hljs.highlightAll();
    </script>
    <script type="text/python">
        from browser import ajax, document, window
        ajax.get("https://jsonplaceholder.typicode.com/posts/1", mode = "json", oncomplete=lambda res: window.console.log(res.json))
    </script>
</body>
</html>
